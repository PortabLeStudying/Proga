# Лабораторная работа 2: Указатели, арифметика указателей

## Задание 1. Работа с тройным указателем

### Код программы
```c
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    double ***pointer = NULL;

    *( *( *( pointer = (double ***) malloc(sizeof(double **))) = (double **)malloc(sizeof(double *)) ) = (double *)malloc(sizeof(double)) ) = 2.0;

    printf("%lf\n", ***pointer);
    free(**pointer);
    free(*pointer);
    free(pointer);
    return 0;
}
```

### Таблица переменных

| Переменная | Тип данных     | Описание                                                                 |
|------------|----------------|-------------------------------------------------------------------------|
| `pointer`  | `double***`    | Тройной указатель, который будет использоваться для доступа к значению. |
| `malloc`   | Функция         | Выделяет память для динамических объектов.                              |

### Анализ работы программы

#### Объяснение решения:
1. **Инициализация тройного указателя**:
   - Переменная `pointer` объявляется как тройной указатель (`double***`) и инициализируется значением `NULL`.

2. **Выделение памяти**:
   - Память выделяется поэтапно:
     - Сначала выделяется память под указатель типа `double**` с помощью `malloc(sizeof(double**))`.
     - Затем выделяется память под указатель типа `double*` с помощью `malloc(sizeof(double*))`.
     - Наконец, выделяется память под переменную типа `double` с помощью `malloc(sizeof(double))`.
   - Все эти операции выполняются в одной строке, используя вложенные вызовы `malloc`.

3. **Присваивание значения**:
   - В выделенную память записывается значение `2.0`. Это делается с помощью разыменования тройного указателя: `*( *( *(pointer))) = 2.0`.

4. **Вывод значения**:
   - Значение, хранящееся в памяти, выводится на экран с помощью `printf("%lf\n", ***pointer)`.

5. **Освобождение памяти**:
   - Память освобождается в обратном порядке выделения:
     - Сначала освобождается память, выделенная под `double` (`free(**pointer)`).
     - Затем освобождается память, выделенная под `double*` (`free(*pointer)`).
     - Наконец, освобождается память, выделенная под `double**` (`free(pointer)`).

#### Последовательность выполнения:
1. `pointer` получает адрес выделенной памяти для `double**`.
2. `*pointer` получает адрес выделенной памяти для `double*`.
3. `**pointer` получает адрес выделенной памяти для `double`.
4. Значение `2.0` записывается в память, на которую указывает `**pointer`.
5. Значение выводится на экран.
6. Память освобождается.

#### Преимущества и недостатки:
- **Преимущества**:
  - Программа демонстрирует работу с многоуровневыми указателями и динамическим выделением памяти.
  - Компактное решение в одну строку.
- **Недостатки**:
  - Сложность чтения и понимания кода из-за вложенных операций.
  - Высокий риск ошибок при работе с указателями.

---

## Задание 2. Сложение двух чисел с использованием указателей

### Код программы
```c
#include <stdio.h>

int main(void) {
    int a = 5, b = 7;
    int *ptrA = &a, *ptrB = &b;
    int sum = *ptrA + *ptrB;

    printf("Sum of %d and %d is %d\n", *ptrA, *ptrB, sum);
    return 0;
}
```

### Таблица переменных

| Переменная | Тип данных | Описание                          |
|------------|------------|-----------------------------------|
| `a`        | `int`      | Первое число.                    |
| `b`        | `int`      | Второе число.                    |
| `ptrA`     | `int*`     | Указатель на первое число.        |
| `ptrB`     | `int*`     | Указатель на второе число.        |
| `sum`      | `int`      | Сумма двух чисел.                |

### Анализ работы программы
- Указатели `ptrA` и `ptrB` инициализируются адресами переменных `a` и `b`.
- Значения переменных складываются через разыменование указателей.
- Результат выводится на экран.

---

## Задание 3. Нахождение максимума из двух чисел с использованием указателей

### Код программы
```c
#include <stdio.h>

int main(void) {
    int a = 10, b = 20;
    int *ptrA = &a, *ptrB = &b;
    int max = (*ptrA > *ptrB) ? *ptrA : *ptrB;

    printf("Maximum of %d and %d is %d\n", *ptrA, *ptrB, max);
    return 0;
}
```

### Таблица переменных

| Переменная | Тип данных | Описание                          |
|------------|------------|-----------------------------------|
| `a`        | `int`      | Первое число.                    |
| `b`        | `int`      | Второе число.                    |
| `ptrA`     | `int*`     | Указатель на первое число.        |
| `ptrB`     | `int*`     | Указатель на второе число.        |
| `max`      | `int`      | Максимальное из двух чисел.      |

### Анализ работы программы
- Указатели `ptrA` и `ptrB` инициализируются адресами переменных `a` и `b`.
- Максимальное значение определяется через условный оператор с использованием разыменования указателей.
- Результат выводится на экран.

---

## Задание 4. Динамический массив с плавающей точкой

### Код программы
```c
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int n;
    printf("Enter the number of elements: ");
    scanf("%d", &n);

    double *arr = (double *)malloc(n * sizeof(double));
    if (arr == NULL) {
        printf("Memory allocation failed\n");
        return 1;
    }

    printf("Enter %d elements:\n", n);
    for (int i = 0; i < n; i++) {
        scanf("%lf", arr + i);
    }

    printf("Array elements:\n");
    for (int i = 0; i < n; i++) {
        printf("%lf ", *(arr + i));
    }
    printf("\n");

    free(arr);
    return 0;
}
```

### Таблица переменных

| Переменная | Тип данных | Описание                          |
|------------|------------|-----------------------------------|
| `n`        | `int`      | Количество элементов массива.     |
| `arr`      | `double*`  | Указатель на динамический массив. |

### Анализ работы программы
- Пользователь вводит количество элементов массива.
- Память выделяется динамически с помощью `malloc`.
- Элементы массива вводятся и выводятся с использованием арифметики указателей.
- Память освобождается после завершения работы.

---

## Задание 5. Обратный порядок элементов массива

### Код программы
```c
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int n;
    printf("Enter the number of elements: ");
    scanf("%d", &n);

    int *arr = (int *)malloc(n * sizeof(int));
    if (arr == NULL) {
        printf("Memory allocation failed\n");
        return 1;
    }

    printf("Enter %d elements:\n", n);
    for (int i = 0; i < n; i++) {
        scanf("%d", arr + i);
    }

    printf("Elements in reverse order:\n");
    for (int i = n - 1; i >= 0; i--) {
        printf("%d ", *(arr + i));
    }
    printf("\n");

    free(arr);
    return 0;
}
```

### Таблица переменных

| Переменная | Тип данных | Описание                          |
|------------|------------|-----------------------------------|
| `n`        | `int`      | Количество элементов массива.     |
| `arr`      | `int*`     | Указатель на динамический массив. |

### Анализ работы программы
- Пользователь вводит количество элементов массива.
- Память выделяется динамически с помощью `malloc`.
- Элементы массива выводятся в обратном порядке с использованием декремента указателя.
- Память освобождается после завершения работы.

---

## Задание 6. Побайтовый вывод переменной

### Код программы
```c
#include <stdio.h>

int main(void) {
    int a = 1234567890;
    unsigned char *ptr = (unsigned char *)&a;

    printf("Byte representation of %d:\n", a);
    for (int i = 0; i < sizeof(a); i++) {
        printf("%02x ", *(ptr + i));
    }
    printf("\n");

    return 0;
}
```

### Таблица переменных

| Переменная | Тип данных      | Описание                          |
|------------|-----------------|-----------------------------------|
| `a`        | `int`           | Целочисленная переменная.         |
| `ptr`      | `unsigned char*`| Указатель на байты переменной.    |

### Анализ работы программы
- Переменная `a` интерпретируется как массив байтов с помощью указателя `unsigned char*`.
- Байты выводятся в шестнадцатеричном формате.

---

## Задание 7. Двумерный динамический массив

### Код программы
```c
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int rows, cols;
    printf("Enter the number of rows and columns: ");
    scanf("%d %d", &rows, &cols);

    int **arr = (int **)malloc(rows * sizeof(int *));
    if (arr == NULL) {
        printf("Memory allocation failed\n");
        return 1;
    }

    for (int i = 0; i < rows; i++) {
        arr[i] = (int *)malloc(cols * sizeof(int));
        if (arr[i] == NULL) {
            printf("Memory allocation failed\n");
            return 1;
        }
    }

    printf("Enter elements of the array:\n");
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            scanf("%d", &arr[i][j]);
        }
    }

    printf("Array elements:\n");
    for (int i = 0; i < rows; i++) {
        for (int j = 0; j < cols; j++) {
            printf("%d ", arr[i][j]);
        }
        printf("\n");
    }

    for (int i = 0; i < rows; i++) {
        free(arr[i]);
    }
    free(arr);
    return 0;
}
```

### Таблица переменных

| Переменная | Тип данных | Описание                          |
|------------|------------|-----------------------------------|
| `rows`     | `int`      | Количество строк массива.         |
| `cols`     | `int`      | Количество столбцов массива.      |
| `arr`      | `int**`    | Указатель на двумерный массив.    |

### Анализ работы программы
- Пользователь вводит размеры массива.
- Память выделяется динамически для строк и столбцов.
- Элементы массива вводятся и выводятся.
- Память освобождается после завершения работы.

---

## Заключение
Лабораторная работа демонстрирует базовые принципы работы с указателями, динамической памятью и арифметикой указателей в C.
